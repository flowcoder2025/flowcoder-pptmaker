# Viewer 페이지 레이아웃 규칙

> **작성일**: 2025-11-10
> **목적**: 슬라이드 뷰어 페이지의 반응형 레이아웃 규칙을 명확히 정의하여 유지보수 시 레이아웃이 깨지지 않도록 방지

---

## 📋 목차

1. [전체 구조 개요](#전체-구조-개요)
2. [화면 크기별 레이아웃 규칙](#화면-크기별-레이아웃-규칙)
3. [슬라이드 뷰어 섹션 규칙 (핵심)](#슬라이드-뷰어-섹션-규칙-핵심)
4. [슬라이드 컨테이너 규칙](#슬라이드-컨테이너-규칙)
5. [광고 배치 규칙](#광고-배치-규칙)
6. [반응형 동작 원리](#반응형-동작-원리)
7. [⚠️ 주의사항 및 금지 사항](#️-주의사항-및-금지-사항)
8. [문제 해결 가이드](#문제-해결-가이드)

---

## 전체 구조 개요

```
┌─────────────────────────────────────┐
│ 헤더 (고정)                          │
├─────────────────────────────────────┤
│ 광고 - 상단 (고정)                    │
├─────────────────────────────────────┤
│                                     │
│ 슬라이드 뷰어 섹션 (flex: 1)         │ ← 핵심! 최소 높이 보장 필수
│   ├─ 슬라이드 컨테이너               │
│   │   └─ iframe (슬라이드)          │
│                                     │
├─────────────────────────────────────┤
│ 네비게이션 (고정, 데스크톱만)         │
├─────────────────────────────────────┤
│ 광고 - 하단 (고정)                    │
└─────────────────────────────────────┘
```

---

## 화면 크기별 레이아웃 규칙

### 모바일 (< 768px)

**레이아웃 방식**: 세로 스크롤 (모든 슬라이드 한 번에 표시)

```typescript
// 모바일 레이아웃
{
  flex: 1,
  overflowY: 'auto',
  padding: '12px',
}
```

**슬라이드 크기**: 화면 너비에 맞춰 스케일 조정
- 기준: 1200px → 실제 화면 너비로 스케일
- 비율: 16:9 유지
- 높이: 자동 계산 (`675 * scale`)

**특징**:
- 네비게이션 버튼 없음 (스크롤로 이동)
- 모든 슬라이드 세로로 나열
- 각 슬라이드 간격: 20px

---

### 데스크톱 (≥ 768px) ⭐ 핵심

**레이아웃 방식**: 페이지네이션 (한 번에 1개 슬라이드만 표시)

#### 슬라이드 뷰어 섹션 (가장 중요!)

```typescript
// ✅ 올바른 구조
{
  flex: 1,
  minHeight: '715px', // ← 핵심! 슬라이드(675px) + padding(40px)
  display: 'flex',
  alignItems: 'center',
  justifyContent: 'center',
  padding: '20px',
}
```

**⚠️ 절대 규칙**:
- `minHeight`는 **반드시** 슬라이드 높이 + padding보다 크거나 같아야 함
- 계산식: `minHeight ≥ 슬라이드 높이(675px) + 위아래 padding(40px)`
- 현재값: `715px` (675 + 20 + 20)

#### 슬라이드 컨테이너

```typescript
// ✅ 올바른 구조
{
  width: '1200px',      // 고정 너비 (16:9 기준)
  height: '675px',      // 고정 높이 (16:9 기준)
  maxWidth: '90vw',     // 화면보다 크면 축소
  maxHeight: '90vh',    // 화면보다 크면 축소
  background: '#FFFFFF',
  borderRadius: '12px',
  boxShadow: '0 4px 12px rgba(0,0,0,0.1)',
  overflow: 'hidden',
}
```

**특징**:
- 네비게이션 버튼 있음 (← / →)
- 슬라이드 중앙 정렬
- 하단 네비게이션 바 표시

---

## 슬라이드 뷰어 섹션 규칙 (핵심)

### ✅ 절대 지켜야 할 규칙

1. **최소 높이 보장**
   ```typescript
   minHeight: '715px' // 슬라이드(675px) + padding(40px)
   ```
   - 이 값은 **절대로** 슬라이드 높이보다 작아서는 안 됨
   - 광고가 슬라이드를 가리지 않도록 하는 핵심 규칙

2. **flex: 1 사용**
   ```typescript
   flex: 1 // 남은 공간을 차지
   ```
   - 헤더, 광고, 네비게이션을 제외한 모든 공간 차지
   - `minHeight`와 함께 사용하여 최소 공간 보장

3. **display: flex + center**
   ```typescript
   display: 'flex',
   alignItems: 'center',
   justifyContent: 'center',
   ```
   - 슬라이드 컨테이너를 중앙에 배치

4. **padding 일관성**
   ```typescript
   padding: '20px' // 상하좌우 동일
   ```
   - 슬라이드 주변 여백
   - `minHeight` 계산 시 반드시 포함

### ❌ 절대 하지 말아야 할 것

```typescript
// ❌ 잘못된 예시 1: minHeight가 너무 작음
{
  flex: 1,
  minHeight: '400px', // ❌ 슬라이드(675px)보다 작음 → 광고에 가림!
}

// ❌ 잘못된 예시 2: minHeight 없음
{
  flex: 1,
  // minHeight 없음 → 화면 좁아지면 광고에 가림!
}

// ❌ 잘못된 예시 3: height 고정
{
  height: '500px', // ❌ flex: 1 효과 무시됨
}

// ❌ 잘못된 예시 4: overflow 잘못 사용
{
  flex: 1,
  overflow: 'hidden', // ❌ 스크롤이 필요한 상황에서 컨텐츠 잘림
}
```

---

## 슬라이드 컨테이너 규칙

### ✅ 올바른 크기 설정

```typescript
{
  width: '1200px',   // 고정 너비 (16:9 기준)
  height: '675px',   // 고정 높이 (16:9 기준)
  maxWidth: '90vw',  // 화면보다 크면 축소
  maxHeight: '90vh', // 화면보다 크면 축소
}
```

**핵심 원리**:
1. **기본 크기**: 1200×675px (16:9 비율)
2. **화면 제한**: `max-width/height`로 화면을 벗어나지 않도록
3. **비율 유지**: 브라우저가 자동으로 16:9 비율 유지하며 축소

### ❌ 잘못된 크기 설정

```typescript
// ❌ 잘못된 예시 1: aspectRatio + width/height 100%
{
  width: '100%',
  height: '100%',
  aspectRatio: '16/9', // ❌ width/height 100%면 aspectRatio 무시됨
}

// ❌ 잘못된 예시 2: maxHeight만 있고 고정 크기 없음
{
  width: '90%',
  maxHeight: '100%',
  aspectRatio: '16/9', // ❌ 높이가 과도하게 축소될 수 있음
}

// ❌ 잘못된 예시 3: minHeight로 제한
{
  width: '90%',
  minHeight: '500px',
  aspectRatio: '16/9', // ❌ minHeight가 비율을 깨뜨림
}
```

---

## 광고 배치 규칙

### 광고 영역 (고정)

1. **헤더 아래 광고**
   ```typescript
   {
     padding: isMobile ? '8px 12px' : '16px 20px',
     background: '#FFFFFF',
     borderBottom: '1px solid #E5E7EB',
   }
   ```

2. **하단 광고**
   ```typescript
   {
     padding: isMobile ? '12px' : '20px',
     background: '#FFFFFF',
     borderTop: '1px solid #E5E7EB',
   }
   ```

### ✅ 광고와 슬라이드 분리 원칙

- 광고는 **고정 높이** 영역 (flex 아님)
- 슬라이드 뷰어는 **flex: 1** 영역 (남은 공간 차지)
- 슬라이드 뷰어의 **minHeight**가 광고 침범 방지

---

## 반응형 동작 원리

### 화면이 충분히 클 때 (일반적인 PC)

```
총 높이: 100vh
├─ 헤더: ~60px
├─ 광고 상단: ~100px
├─ 슬라이드 뷰어: flex: 1 (남은 공간, 최소 715px)
│   └─ 슬라이드: 1200×675px (중앙 정렬)
├─ 네비게이션: ~80px
└─ 광고 하단: ~100px
```

**동작**:
- 슬라이드: 1200×675px 고정 크기로 표시
- 슬라이드 뷰어 섹션: 남은 공간 전체 차지 (715px 이상)
- 스크롤 없음

### 화면이 좁아질 때 (작은 PC, 태블릿 가로)

```
총 높이: 100vh (예: 800px)
├─ 헤더: ~60px
├─ 광고 상단: ~100px
├─ 슬라이드 뷰어: 715px (minHeight 적용!) ← 강제로 715px 확보
│   └─ 슬라이드: 1200×675px
├─ 네비게이션: ~80px
└─ 광고 하단: ~100px
───────────────────────
총 필요 높이: ~955px > 800vh
→ 페이지 전체 스크롤 생김 (정상 동작)
```

**동작**:
- 슬라이드 뷰어: **강제로 715px 확보** (minHeight)
- 전체 페이지 높이가 100vh 초과 → **페이지 전체 스크롤** 생김
- 광고는 여전히 슬라이드와 분리됨 (가리지 않음) ✅

### 화면이 매우 작을 때 (작은 태블릿, 모바일 가로)

```
화면 크기: 1024×600px (예: 작은 노트북)
슬라이드: maxWidth(90vw) = 921px 적용
        maxHeight(90vh) = 540px 적용
        → 실제 크기: 960×540px (16:9 비율 유지)
```

**동작**:
- `maxWidth/maxHeight`가 슬라이드 크기 제한
- 브라우저가 16:9 비율 유지하며 자동 축소
- 슬라이드 뷰어: 여전히 715px 확보 (페이지 스크롤 발생)

---

## ⚠️ 주의사항 및 금지 사항

### 🚫 절대 금지

1. **슬라이드 뷰어 섹션의 minHeight 제거 또는 축소**
   ```typescript
   // ❌ 절대 금지!
   {
     flex: 1,
     // minHeight 없음 또는 minHeight: '400px' 같이 작은 값
   }
   ```
   **결과**: 화면 좁아지면 광고가 슬라이드를 가림

2. **슬라이드 컨테이너에 width/height 100% 사용**
   ```typescript
   // ❌ 절대 금지!
   {
     width: '100%',
     height: '100%',
     aspectRatio: '16/9', // 무시됨!
   }
   ```
   **결과**: 비율이 깨짐

3. **슬라이드 뷰어 섹션에 overflow: hidden 사용**
   ```typescript
   // ❌ 절대 금지!
   {
     flex: 1,
     overflow: 'hidden', // 스크롤 방지
   }
   ```
   **결과**: 화면 좁아지면 컨텐츠가 잘림

4. **광고 영역을 flex로 변경**
   ```typescript
   // ❌ 절대 금지!
   {
     flex: 1, // 광고가 늘어남
   }
   ```
   **결과**: 광고가 과도하게 커지고 레이아웃 망가짐

### ⚠️ 변경 시 주의

1. **슬라이드 크기 변경 시**
   - 슬라이드 높이를 변경하면 `minHeight`도 함께 조정 필요
   - 계산식: `minHeight = 슬라이드 높이 + 위아래 padding`

2. **padding 변경 시**
   - 슬라이드 뷰어 섹션의 padding을 변경하면 `minHeight`도 조정 필요

3. **광고 높이 변경 시**
   - 광고 높이가 너무 커지면 슬라이드 뷰어 공간 부족
   - 전체 페이지 스크롤 발생 가능성 증가

---

## 문제 해결 가이드

### 문제 1: 화면이 좁아지면 광고가 슬라이드를 가려요

**원인**: 슬라이드 뷰어 섹션의 `minHeight`가 부족함

**해결책**:
```typescript
// ViewerContent.tsx 520-528줄
{
  flex: 1,
  minHeight: '715px', // ✅ 이 값이 슬라이드 높이 + padding보다 크거나 같은지 확인
  display: 'flex',
  alignItems: 'center',
  justifyContent: 'center',
  padding: '20px',
}
```

**검증**:
1. 슬라이드 높이 확인: 675px
2. 위아래 padding 합계: 40px (20px × 2)
3. 필요한 minHeight: 675 + 40 = 715px ✅

---

### 문제 2: 슬라이드 비율이 깨져요 (16:9가 아님)

**원인**: 슬라이드 컨테이너에 `width/height: 100%` 사용

**해결책**:
```typescript
// ViewerContent.tsx 529-538줄
{
  width: '1200px',   // ✅ 고정 값 사용
  height: '675px',   // ✅ 고정 값 사용
  maxWidth: '90vw',  // ✅ 화면 제한
  maxHeight: '90vh', // ✅ 화면 제한
}
```

**검증**:
- 개발자 도구에서 슬라이드 컨테이너 크기 확인
- 너비:높이 비율이 16:9 (1.777...)인지 확인

---

### 문제 3: 슬라이드가 너무 작아요

**원인**: `maxWidth/maxHeight`가 너무 작음 또는 슬라이드 고정 크기가 작음

**해결책**:
```typescript
// 슬라이드 크기 키우기
{
  width: '1200px',    // 필요시 증가 (예: 1400px)
  height: '675px',    // 비율 유지하며 증가 (예: 787px)
  maxWidth: '90vw',   // 필요시 증가 (예: 95vw)
  maxHeight: '90vh',  // 필요시 증가 (예: 95vh)
}

// minHeight도 함께 조정
{
  minHeight: '827px', // 새 높이(787px) + padding(40px)
}
```

---

### 문제 4: 페이지 전체가 스크롤돼요 (화면이 작을 때)

**원인**: 정상 동작입니다!

**설명**:
- 화면 높이가 부족할 때 페이지 전체 스크롤이 발생하는 것은 **의도된 동작**
- 슬라이드 뷰어 섹션의 `minHeight: 715px` 보장을 위해 필요
- 광고가 슬라이드를 가리지 않도록 하는 핵심 메커니즘

**올바른 동작**:
- 화면 넓을 때: 스크롤 없음
- 화면 좁아질 때: 페이지 전체 스크롤 (광고는 슬라이드 안 가림) ✅

---

## 코드 위치 참조

### ViewerContent.tsx

**데스크톱 레이아웃** (519-551줄):
```typescript
) : (
  // 데스크톱: 페이지네이션 레이아웃
  <div style={{
    flex: 1,
    minHeight: '715px', // ← 핵심! 절대 건드리지 말 것
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    padding: '20px',
  }}>
    <div style={{
      width: '1200px',      // ← 슬라이드 고정 크기
      height: '675px',      // ← 슬라이드 고정 크기
      maxWidth: '90vw',     // ← 반응형 제한
      maxHeight: '90vh',    // ← 반응형 제한
      background: '#FFFFFF',
      borderRadius: '12px',
      boxShadow: '0 4px 12px rgba(0,0,0,0.1)',
      overflow: 'hidden',
    }}>
      <iframe ... />
    </div>
  </div>
)}
```

**모바일 레이아웃** (468-518줄):
```typescript
{isMobile ? (
  // 모바일: 세로 스크롤 레이아웃
  <div style={{
    flex: 1,
    overflowY: 'auto',
    padding: '12px',
    background: '#F9FAFB',
  }}>
    {/* 모든 슬라이드 세로로 나열 */}
  </div>
) : ...}
```

---

## 체크리스트

레이아웃 변경 시 아래 항목을 **반드시** 확인하세요:

### 데스크톱 레이아웃
- [ ] 슬라이드 뷰어 섹션에 `minHeight: '715px'` 있는가?
- [ ] `minHeight` ≥ 슬라이드 높이 + padding인가?
- [ ] 슬라이드 컨테이너에 고정 `width/height`가 있는가?
- [ ] `maxWidth/maxHeight`로 화면 제한하고 있는가?
- [ ] 광고 영역이 `flex`가 아닌 고정 높이인가?

### 모바일 레이아웃
- [ ] 슬라이드 스케일 계산이 정확한가?
- [ ] 16:9 비율이 유지되는가?
- [ ] 세로 스크롤이 작동하는가?

### 공통
- [ ] 광고가 슬라이드를 가리지 않는가?
- [ ] 화면 크기를 줄여도 비율이 유지되는가?
- [ ] 타입 체크가 통과하는가? (`npx tsc --noEmit`)

---

## 마지막 업데이트

**날짜**: 2025-11-10
**변경 사항**: 슬라이드 뷰어 섹션 최소 높이 보장 규칙 확립
**커밋**: f59e096 - "ui: viewer 페이지 데스크톱 레이아웃 개선 - 광고 겹침 완전 해결"

---

## 참고 문서

- [ViewerContent.tsx](./ViewerContent.tsx) - 실제 구현 코드
- [../CLAUDE.md](../CLAUDE.md) - 프로젝트 전체 가이드
- [RELEASE_NOTES.md](../../RELEASE_NOTES.md) - 변경 이력
